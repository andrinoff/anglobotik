from openai import OpenAI
import openai
import os

# criteria = "КритерииЕГЭПисьмо-максимум6балловК1-Решениекоммуникативнойзадачи2баллаеслиЗаданиевыполненополностью:содержаниеотражаетвсеаспекты,указанныевзадании(даныполныеиточныеответынавсевопросы,заданыправильно3вопросапоуказаннойтеме);стилевоеоформлениеречивыбра-ноправильносучётомцеливысказыванияиадресата;соблюденыпринятыевязыкенормывежливости.Допускается1неполныйилинеточныйаспект1баллеслиЗаданиевыполненонеполностью:содержаниеотражаетневсеаспекты,указанныевзадании(всеслучаи,неуказанныевоцениваниина2баллаи0баллов)0балловеслиЗаданиеневыполнено:3иболееаспектасодержанияотсутствуют,ИЛИ6аспектовраскрытынеполно/неточно,ИЛИ1аспектнераскрыти4–5раскрытынеполно/неточно,ИЛИ2аспектанераскрытыи2–4раскрытынеполно/неточно,ИЛИответнесоответствуеттребуемомуобъёму(100-140слов)К2-Организациятекста2баллаеслиВысказываниелогично;средствалогическойсвязииспользованыправильно.текстверноразделённаабзацы;структурноеоформлениетек-стасоответствуетнормам,принятымвстранеизучаемогоязыка(допускается1ошибкаворганизациитекста)1баллеслиИмеются2–3ошибкиворганизациитекста0балловеслиИмеются4иболееошибкиворганизациитекстаК3-Языковоеоформлениетекста2баллаеслиИспользуемыйсловарныйзапасиграмматическиеструктурысоответствуютбазовомууровнюсложностизадания,орфографическиеипунктуационныеошибкипрактическиотсутствуют(допускаются1–2лексико-грамматическиеошибкиИ/ИЛИ1–2орфографическиеипунктуационныеошибки)1баллеслиИспользуемыйсловарныйзапасиграмматическиеструктурынеполностьюсоответствуютбазовомууровнюсложностизадания:имеются3–4лексико-грамматическиеошибкиИ/ИЛИимеются3–4орфографическиеипунктуационныеошибки0балловеслиИспользуемыйсловарныйзапасиграмматическиеструктурынесоответствуютбазовомууровнюсложностизадания:имеются5иболеелексико-грамматическихошибок,И/ИЛИимеются5иболееорфографическихипунктуационныхошибокПриполученииэкзаменуемым0балловпокритерию«Решениекоммуникативнойзадачи»ответназаданиеоцениваетсяв0балловповсемкритериямоцениваниявыполненияэтогозадания.Правильноеиспользованиесредствлогическойсвязипредполагаетобязательныелогическиесвязки-переходымеждучастямивысказывания.Эссе-максимум14балловК1-Решениекоммуникативнойзадачи3баллаеслиЗаданиевыполненополностью:содержаниеотражаетполноиточновсеаспекты,указанныевзадании;стилевоеоформлениеречивыбраноправильно(допускается1неполный/неточныйаспекти1нарушениенейтральногостиля)2баллаеслиЗаданиевыполненовосновном:1аспектнераскрыт(остальныераскрытыполно),ИЛИ1аспектнераскрыти1раскрытнеполно/неточно,ИЛИ2–3аспектараскрытынеполно/неточно;стилевоеоформлениеречивосновномправильно(допускаются2–3нарушениянейтральногостиля)1баллеслиЗаданиевыполненонеполностью:1аспектнераскрыти2–3раскрытынеполно/неточно,ИЛИ2аспектанераскрыты(остальныераскрытыполно),ИЛИ2аспектасодержаниянераскрытыи1раскрытнеполно/неточно,ИЛИ4–5аспектовраскрытынеполно/неточно;имеютсяошибкивстилевомоформленииречи(допускаются4нарушениянейтральногостиля)0балловеслиЗаданиеневыполнено:всеслучаи,неуказанныевоцениваниина1,2и3балла,ИЛИответнесоответствуеттребуемомуобъёму(200-250слов),ИЛИболее30%ответаимеетнепродуктивныйхарактер(т.е.текстуальносовпадаетсопубликованнымисточником)К2-Организациятекста3баллаеслиВысказываниелогично,структуратекстасоответствуетпредложенномуплану,текстправильноразделённаабзацы,средствалогическойсвязииспользованыправильно2баллаеслиВысказываниелогично,структуратекстасоответствуетпредложенномуплану,текстправильноразделённаабзацы,средствалогическойсвязииспользованы(допускаются1–3ошибки)1баллеслиВвысказыванииимеются4–5ошибокворганизациитекстаИ/ИЛИотсутствуетвступлениеилизаключение0балловеслиВвысказыванииимеются6иболееошибокворганизациитекста,И/ИЛИотсутствуетвступлениеизаключение,И/ИЛИпредложенныйпланответаполностьюнесоблюдается,И/ИЛИотсутствуетделениенаабзацыК3-Лексика3баллаеслиИспользуемыйсловарныйзапассоответствуетвысокомууровнюсложностизадания,практическинетнарушенийвиспользованиилексики(допускается1лексическаяошибка)2баллаеслиИспользуемыйсловарныйзапассоответствуетвысокомууровнюсложностизадания,однакоимеются2–3лексическиеошибки,ИЛИсловарныйзапасограничен,нолексикаиспользованаправильно1баллеслиИспользуемыйсловарныйзапасневполнесоответствуетвысокомууровнюсложностизадания,втекстеимеются4лексическиеошибки0балловеслиИспользуемыйсловарныйзапаснесоответствуетвысокомууровнюсложностизадания,втекстеимеются5иболеелексическихошибокК4-Грамматика3баллаеслиИспользуемыеграмматическиесредствасоответствуютвысокомууровнюсложностизадания,нарушенийпрактическинет(допускаются1–2неповторяющиесяграмматическиеошибки)2баллаеслиИспользуемыеграмматическиесредствасоответствуютвысокомууровнюсложностизадания,однаковтекстеимеются3–4грамматическиеошибки1баллеслиИспользуемыеграмматическиесредстваневполнесоответствуютвысокомууровнюсложностизадания,втекстеимеются5–7грамматическихошибок0балловеслиИспользуемыеграмматическиесредстванесоответствуютвысокомууровнюсложностизадания,имеются8иболееграмматическихошибокК5-Орфографияипунктуация2баллаеслиОрфографическиеошибкипрактическиотсутствуют.Текстразделённапредложениясправильнымпунктуационнымоформлением(допускается1орфографическаяИ/ИЛИ1пунктуационнаяошибка)1баллеслиВтекстеимеются2–4орфографическиеИ/ИЛИпунктуационныеошибки0балловеслиВтекстеимеются5иболееорфографическихИ/ИЛИпунктуационныхошибокПриполученииэкзаменуемым0балловпокритерию«Решениекоммуникативнойзадачи»ответназаданиеоцениваетсяв0балловповсемкритериямоцениваниявыполненияэтогозадания.Правильноеиспользованиесредствлогическойсвязипредполагаетобязательныелогическиесвязки-переходымеждувсемичастямивысказывания.Максимальныйбалл,которыйможетбытьвыставленпокритерию«Орфографияипунктуация»,–2балла.ОГЭПисьмо,максимум10балловК1-Решениекоммуникативнойзадачи3баллаеслиЗаданиевыполненополностью:содержаниеотражаетвсеаспекты,указанныевзадании:даныполныеиточныеответына3вопроса;стилевоеоформлениеречивыбраноправильносучётомцеливысказыванияиадресата(обращение,завершающаяфразаиподпись);соблюденыпринятыевязыкенормывежливости(благодарностьзаполученноеписьмоили/ивыражениеположительныхэмоцийотегополучения,надежданапоследующиеконтакты).Допускается1неполныйилинеточныйаспект2баллаеслиЗаданиевыполненовосновном:1аспектнераскрыт,ИЛИ2–3аспектараскрытынеполноилинеточно,ИЛИ1аспектнераскрыти1раскрытнеполно/неточно1баллеслиЗаданиевыполненочастично:2аспектанераскрыты,ИЛИ4аспектараскрытынеполноилинеточно,ИЛИ1аспектнераскрыти2раскрытынеполно/неточно0балловеслиЗаданиеневыполнено:всеслучаи,неуказанныевоцениваниина3,2и1баллК2-Организациятекста2баллаеслиТекстлогичновыстроениверноразделённаабзацы;правильноиспользованысредствалогическойсвязи;структурноеоформлениетекстасоответствуетнормамписьменногоэтикета,принятымвстранеизучаемогоязыка.Допускается1ошибкаворганизациитекста1баллеслиИмеются2–3ошибкиворганизациитекста0балловеслиИмеются4иболееошибкиворганизациитекстаК3-Лексико-грамматическоеоформлениетекста3баллаеслиИспользуемыйсловарныйзапасиграмматическиеструктурысоответствуютуровнюсложностизадания,допускается1лексико-грамматическаяошибка2баллаеслиИспользуемыйсловарныйзапасиграмматическиеструктурынеполностьюсоответствуютуровнюсложностизадания,имеются2–3лексико-грамматическиеошибки1баллеслиИспользованныйсловарныйзапасиграмматическиеструктурычастичносоответствуютуровнюсложностизадания,имеются4лексико-грамматическиеошибки0балловеслиИспользованныйсловарныйзапасиграмматическиеструктурынесоответствуютуровнюсложностизадания,имеются5иболеелексико-грамматическихошибокК4-Орфографияипунктуация2баллаеслиОрфографическиеипунктуационныеошибкипрактическиотсутствуют,имеются2ошибки1баллеслиВтекстеимеются3–4орфографическиеипунктуационныеошибки0балловеслиВтекстеимеютсямногочисленныеорфографическиеипунктуационныеошибки(5иболееошибок)1.Выполнениезадания35(электронноеписьмо)оцениваетсяпокритериямК1–К4(максимальноеколичествобаллов–10).2.Приполученииэкзаменуемым0балловпокритерию«Решениекоммуникативнойзадачи»ответназадание35повсемкритериямоценивается0баллов.3.Еслиобъёмписьмаменее90слов,тоответназаданиеоценивается0балловповсемкритериям.Еслиобъёмболее132слов,топроверкеподлежаттолько120слов,т.е.тачастьэлектронногописьма,котораясоответствуеттребуемомуобъёму.4.Приопределениисоответствияобъёмапредставленнойработытребованиямсчитаютсявсеслова,спервогословапопоследнее,включаявспомогательныеглаголы,предлоги,артикли,частицы.Вэлектронномписьмеобращениеиподписьтакжеподлежатподсчёту.Приэтом:−стяжённые(краткие)формы(например,I’ve,it’s,doesn’t,wasn’t)считаютсякакоднослово;−числительные,выраженныецифрами(например,5,29,2010,123204),считаютсякакоднослово;−числительные,выраженныесловами,считаютсякакслова;−сложныеслова,написанныечерездефис(например,pop-singer,English-speaking,thirty-two)считаютсякакоднослово;−сокращения(например,UK,e-mail,TV)считаютсякакоднослово"


def check_essay(essay:str, exam:str):
    client = OpenAI()
    openai.api_key = os.getenv('OPENAI_API_KEY')
    response = client.responses.create(
    model="gpt-4o-mini",
    instructions="system, write with no markdown",
    input=f'оцени мне это эссе: "{essay}" по официальным критериям по эссе {exam}, давая оценку на каждый отдельный критерий и исправляя ошибки в эссе, связанные с критериями. ',
)
    print(response.output_text)
    return response.output_text
    
def check_letter(letter:str, exam:str):
    client = OpenAI()
    openai.api_key = os.getenv('OPENAI_API_KEY')
    response = client.responses.create(
    model="gpt-4o-mini",
    instructions="system, write with no markdown",
    input=f'оцени мне это письмо: "{letter}" по официальным критериям письма {exam}, давая оценку на каждый отдельный критерий и исправляя ошибки в письме, связанные с критериями.',
)
    print(response.output_text)
    return response.output_text
    
